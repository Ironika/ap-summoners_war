import AppHelper from 'helpers/AppHelper';
import AuthHelper from 'helpers/AuthHelper';
import UserHelper from 'helpers/UserHelper';
import { BaseData, Utils } from 'ap-react-bootstrap'

let PAGES = {
    import: "import",
    monsters: "monsters",
    runes: "runes",
    builds: "builds"
}

/* This class was auto-generated by the JavaScriptWriter */
class AppData extends BaseData {

	register(obj) {
		super.register(obj)

		this.obj.home = this.onClick.bind(this, '/')
		this.obj.profile = this.onClick.bind(this, 'profile')

		Utils.forEach(PAGES, function(page) {
			this.obj[page] = this.onClick.bind(this, PAGES[page])
		}.bind(this))

		this.obj.state = {
			username: 'Homunculus'
		}

		UserHelper.register(this, this.buildDataUser.bind(this))
		UserHelper.getUser(AuthHelper.getEntityId())
	}

	unregister() {
		UserHelper.unregister(this)
	}

	buildDataUser() {
        let username = UserHelper.getData(AuthHelper.getEntityId() + '/username')
		this.setState({
            username: username || 'Homunculus',
        })
	}

	onClick(id) {
		if(id == '/')
			AppHelper.navigate('/');
		else {
			this.obj.setState({currentPage: id})
			AppHelper.navigate('/' + id);
		}
	}

}
var AppObj = new AppData();
AppObj.PAGES = PAGES
export default AppObj;

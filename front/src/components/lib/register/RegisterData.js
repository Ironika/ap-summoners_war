import AppHelper from 'helpers/AppHelper';
import UserHelper from 'helpers/UserHelper';
import AuthHelper from 'helpers/AuthHelper';
import { Dispatcher } from 'ap-flux';

/* This class was auto-generated by the JavaScriptWriter */
class RegisterData {

	register(obj) {
		this.obj = obj

		this.mail = ""
		this.password = ""
		this.name = ""

		this.init();
	}

	unregister() {
	}

	onClick() {
		if(this.obj.props.onClick)
			this.obj.props.onClick()
	}

	onSubmit() {
		let user = {username: this.name, password: this.password}
		UserHelper.postUser(user)
			.then(function() {
				let values = {username: this.name, password: this.password}
				AuthHelper.getAuth(values)
					.then(function() {
						AppHelper.navigate("profile")
					})
			}.bind(this))
	}

	onChange(id, event) {
		if (id == 'mail') {
			this.mail = event.target.value;
	    	this.obj.setState({mail: this.mail})
		} else if (id == 'name') {
			this.name = event.target.value;
	    	this.obj.setState({name: this.name});
		} else {
			this.password = event.target.value;
	    	this.obj.setState({password: this.password});
		}
	 }

	init() {
		this.onChange = this.onChange.bind(this)
		this.onSubmit = this.onSubmit.bind(this)
		this.onClick = this.onClick.bind(this)

		this.obj.setState({
			mail: this.mail, 
			password: this.password,
			name: this.name,  
			onChange: this.onChange,
			onSubmit: this.onSubmit,
			onClick: this.onClick
		})
	}
}
var RegisterObj = new RegisterData();
export default RegisterObj;
